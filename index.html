<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Linkedin</title>
  <script type="text/javascript" src="//platform.linkedin.com/in.js">
    api_key: 78iravm44jzndu
    authorize: true
    onLoad: onLinkedInLoad
  </script>
  <script type="text/javascript">
  </script>
</head>

<body>
<script type="text/javascript">
function onLinkedInLoad() {
  IN.Event.on(IN, "auth", function() {onLinkedInLogin();});
  IN.Event.on(IN, "logout", function() {onLinkedInLogout();});
}

function onLinkedInLogout() {
  setConnections({}, {total:0});
}

function onLinkedInLogin() {
  IN.API.Connections("me")
  .fields("id", "firstName", "lastName", "pictureUrl", "publicProfileUrl")
  .result(function(result, metadata) {
    setConnections(result.values, metadata);
  });
}

function setConnections(connections) {
  console.log('dos')
  var connHTML = "<ul>";
  for (id in connections) {
    connHTML = connHTML + "<li><a href=\"" + connections[id].publicProfileUrl + "\">";
  
  if (connections[id].hasOwnProperty('pictureUrl')) {
    connHTML = connHTML + "<img align=\"baseline\" src=\"" + connections[id].pictureUrl + "\"></a>";
  } else {
    connHTML = connHTML + "<img align=\"baseline\" \n\
        src=\"http://linkedin.com/scds/common/u/img/icon/icon_no_photo_80x80.png\"></a>";
  }

  connHTML = connHTML + "&nbsp;<a href=\"" + connections[id].publicProfileUrl + "\">";
  connHTML = connHTML + connections[id].firstName + " " + connections[id].lastName + "</a>";
  connHTML = connHTML + " (memberToken: " + connections[id].id + ")</li>";
}

connHTML = connHTML + "</ul>";
document.getElementById("connectionsdata").innerHTML = connHTML;
}
</script>
<script type="IN/Login">
<div id="connectionstest">
  <p>Current User's Connections:</p>
  <div id="connectionsdata"></div>
</div>
</script>
</body>

</html>